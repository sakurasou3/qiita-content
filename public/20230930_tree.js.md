---
title: Three.jsで遊んでみたら楽しすぎたお話
tags:
  - ''
private: true
updated_at: ''
id: null
organization_url_name: null
slide: false
ignorePublish: false
---
# 勉強してみたいと思った経緯

最近ボケーっとYouTube見てると、結構な頻度で皆さんThree.jsを組んでますよね。
初め見た時は何やってるのか全くわからなくて、次第に気になって仕方なくなってしまいました。

実際に手頃な動画で仮実装とかしてみると、なんだこれ楽しい！とどハマりしてしまいました。

技術的にはまだまだだし、わからないことばっかりですが、試行錯誤すること自体が楽しかったので、今回は基本のさわりだけご紹介できればと思います。

# どういうものが作れる？
こんなのが作れるみたいです。
デザインセンス皆無なのは目を瞑ってください。
名付けて、謎の天体X、地球を照らすの図、です（笑）



公式だとこんなものが作れるみたいです。
世界の頭のいい人たちはレベルが違いますね（笑）
https://threejs.org/examples/#webgl_animation_keyframes

要は2次元の画像表示でなく、3次元のオブジェクトを画面に表示できるし、
設定すればユーザーが自由に操作できるようになるよ！というものです。

2次元を飛び出して、ついに3次元Webページの時代に突入するというわけですね。

# 全体の構成
ここからは（超！）簡単に使い方を紹介します。
（が、公式の方が断然詳しいので使う時は公式をご参照ください）

## インストール
https://threejs.org/docs/#manual/en/introduction/Installation

公式の通り、npmからインストールできます。簡単！

まだまだ初学者なので言われるがままにviteも導入して開発してますが、他のビルドツールでもいいみたい。
（viteを使うと何がいいのかは勉強不足のため割愛します。。）

## 必須で必要なもの
早速実装に進んでいきます。

### ①シーン（Sceen）
映画のシーン。転じて「舞台」や「空間」のイメージです。

この「空間」にこれから紹介するものたちをaddして、
Web上に表示できる映像を作り出します。

シーンの作り方は常にこのパターンしかない、はず。多分。
```
import * as THREE from 'three';

const scene = new THREE.Scene();
```

### ②カメラ(Camera)
映画を撮るには、「空間」とその空間を撮影する「カメラ」も必要ですね。
その名前の通り、撮影するものになります。

シーンと違ってカメラはいくつか種類があるようです。

#### PerspectiveCamera
一番ポピュラーなのがこれ。
人間の目からの見え方に一番近いみたいです。
初めは困ったらこのカメラ使っとけ、くらいに思ってます（笑）
https://threejs.org/docs/index.html#api/en/cameras/PerspectiveCamera

カメラなのでいくつかパラメータも設定できます。
視野角、アスペクト比やカメラの開始位置など、調整は難しいですが、ぜひ映画監督になったつもりで調整してみると楽しい、はず。

#### ArrayCamera
調整がややこしそうだけど、直感で面白そうだなーと思ったのがこれ。

1カメ、2カメみたいに複数視点からの映像を使えるはず。
とはいえ、いい例が見当たらなかったので、使いにくいもしくはあまり使い道のない子なのかもしれない（笑）
https://threejs.org/docs/index.html#api/en/cameras/ArrayCamera

### ③レンダラー（Renderer）
各シーンをカメラで撮影し終わりました。
このデータを映画館（ここではブラウザ）に投影できるようにするため、映像を変換する必要があります。
これがレンダラーの役割。

これもいくつか種類があるみたいなのですが、ちょっと理解が追いついてないです。
一番ポピュラーなものだけ。
#### WebGLRenderer
映像をピクセル描画してるよ、ということらしいのですが、
それにしては超絶滑らかに表示・操作できるのが不思議でなりません（笑）
https://threejs.org/docs/index.html#api/en/renderers/WebGLRenderTarget

### ④オブジェクト・モデル
シーンからレンダラーまでで、基本構成を設定し終わりました。
ここからは楽しい楽しいオブジェクトをこねくり回すフェーズです！

とはいえ一概に「オブジェクト」と言っても、実は3つのものから構成されています。
- ジオメトリ（骨格・骨組み）
- マテリアル（表面）
- メッシュ（ジオメトリ＋マテリアルを組み合わせたもの）
これらを順にご紹介していきます。

#### ジオメトリ(Geometry)
上記の通り、オブジェクトの「骨格」を設定します。

デザイン重視のオブジェクトを表示する場合は、Blenderなどから3Dモデルをロードする方が楽そうですが、
単純な構造のオブジェクト（球体やキューブ、ドーナツ形状など）はthree.jsだけでも作成できます。

好きな形を状況に合わせて設定すればいいのですが、欲しい形にどんなパラメータを設定するのか分かりづらい場合があります。

そんな時は公式サイトを覗いてみると、ジオメトリごとにプレビューが表示されており、値を変更すればどんな形ができるか一目瞭然。
こういうのも便利に使っていきたいですね。
https://threejs.org/docs/index.html#api/en/geometries/BoxGeometry

#### マテリアル（Material）
ジオメトリで組み立てた骨格の表面を設定します。

用意したテクスチャを貼り付けるもよし、
マテリアルの種類によっては質感を金属っぽくメタリックにすることもできますし、
光源を当てたり（この光源を動かすことも可能）もできてとーーっても奥が深そうです。

デザインに凝る人ならここが一番楽しくて、一番時間がかかるんじゃないですかね（他人事）

ジオメトリ同様、マテリアルもプレビュー操作が使えます。
個人的にはこれを弄ってるだけで楽しいんですけどね（笑）
https://threejs.org/docs/index.html#api/en/materials/MeshBasicMaterial

#### メッシュ(Mesh)
はい、これで最後です。
ここまで設定してきたジオメトリとマテリアルを組み合わせて、ようやく「オブジェクト」としての体をなします。

ここで組み合わせてオブジェクト、もといメッシュを、
①のSceneにaddすれば、晴れて画面上にオブジェクトが表示されます。

バンザイ！


# 終わりに

ここまでで紹介したメンバーは、実はThree.jsの基本中の基本のメンバーたちです。
私もまだ公式サイトに未知のセクションが丸ごとあったりするので、
まだまだ楽しいことができそうですね。

とはいえThree.jsは現在注目度の高いライブラリになっているので、
ものすごい頻度で更新が入っています。
ちょっとバージョンが変わると動かなくなったりすることもあるかもしれないので、
バージョン管理だけは気をつけたほうがいいかな〜と思いました。
https://github.com/mrdoob/three.js/releases

以上です！